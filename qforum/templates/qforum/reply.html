{% load static %}
<div class="row gx-0 me-0 pe-0 mx-0 px-0">
    <div class="col-md-12 left-indent">
        {% for comment in replies %}
        <a class="text-black" href="#">
            {% if comment.name.profile.image %}
            <img class="rounded-circle article-img profile-img" src="{{ comment.name.profile.image.url }}">
            {% else %}
            <img class="rounded-circle article-img profile-img" src="{% get_media_prefix %}default.jpg">
            {% endif %}
            {{comment.name}}</a>
        <span class="op-6 text-muted">{{ comment.created|timesince }} ago</span>
        {% if request.user == comment.name %}
        <span class="op-6 px-3 text-muted"><i class="fa-solid fa-pen-to-square"></i></span>
        <span class="op-6 text-muted"><i class="fa-solid fa-trash small"></i></span>
        {% endif %}
        <p class="px-3 mt-2"> {{comment.content}}</p>
        <div class="col-md-6 d-inline-block bg-success">
            <form method="POST" class="d-inline-block" action="{% url 'qforum:comment-like' comment.thread.slug comment.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <button class="remove-default-btn text-muted border-0 bg-white d-inline-block pe-1" type="submit">
                    <i class="fa-regular fa-thumbs-up"> </i>
                </button>
                {% if comment.no_of_likes %}
                <span>{{ comment.no_of_likes }}</span>
                {% endif %}
            </form>
            <form method="POST" class="d-inline-block" action="{% url 'qforum:comment-dislike' comment.thread.slug comment.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <button class="remove-default-btn text-muted border-0 bg-white d-inline-block" type="submit">
                    <i class="far fa-thumbs-down"> <span>{{ comment.dislikes.all.count }}</span></i>
                </button>
                {% if comment.no_of_dislikes %}
                <span>{{ comment.no_of_dislikes }}</span>
                {% endif %}
            </form>
            {% if user != comment.name %}
            <button class="btn btn-sm d-inline-block" data-bs-toggle="collapse" data-bs-target="#comment-form-{{comment.id}}" aria-controls="comment-form-{{comment.id}}">
                <i class="fa-solid fa-comment text-muted"></i> <span>Reply</span></button>
        </div>
        {% endif %}
        <div class="collapse" id="comment-form-{{comment.id}}">
            {% if user.is_authenticated %}
            <!-- Reply form -->
            <form method="POST" action="{% url 'qforum:reply' comment.thread.slug comment.id %}">
                {% csrf_token %}
                {{ comment_form.content }}
                <button type="button" onclick="hideForm()" class="btn btn-light border btn-sm">Cancel</button>
                <button type="submit" class="btn btn-primary">Submit Reply</button>
            </form>
            {% else %}
            <h2>You need to Login to reply</h2>
            {% endif %}
        </div>
        {% if comment.replies.count > 0 %}
        {% load reply_tree %}
        {% reply_tree%}
        {% endif %}
        {% endfor %}
    </div>
</div>